!function(){"use strict";const e=1,t=2,o=3;const n=new class{constructor(){this.level=t,this.categories=new Set(["error","warn"]),this.prefix="[LenQuant]"}async init(){try{const e=await chrome.storage.local.get(["debugMode","logCategories"]);e.debugMode&&(this.level=o,this.categories=new Set(["error","warn","info","debug","dom","api","auth"])),e.logCategories&&(this.categories=new Set(e.logCategories))}catch(e){}}setLevel(e){this.level=e}enableCategory(e){this.categories.add(e)}disableCategory(e){this.categories.delete(e)}log(e,...t){this.level>=o&&this.categories.has(e)&&console.log(`${this.prefix}:${e}`,...t)}info(e,...o){this.level>=t&&console.info(`${this.prefix}:${e}`,...o)}warn(t,...o){this.level>=e&&console.warn(`${this.prefix}:${t}`,...o)}error(e,...t){console.error(`${this.prefix}:${e}`,...t)}time(e){this.level>=o&&console.time(`${this.prefix} ${e}`)}timeEnd(e){this.level>=o&&console.timeEnd(`${this.prefix} ${e}`)}group(e){this.level>=o&&console.group(`${this.prefix} ${e}`)}groupEnd(){this.level>=o&&console.groupEnd()}};n.init();async function s(){try{const e=await chrome.storage.local.get(["analysesCount","bookmarksCount","alertsCount"]),t=document.getElementById("analyses-count"),o=document.getElementById("bookmarks-count"),s=document.getElementById("alerts-count");t&&(t.textContent=e.analysesCount||0),o&&(o.textContent=e.bookmarksCount||0),s&&(s.textContent=e.alertsCount||0),await async function(e){const t=await chrome.storage.local.get(["hasSeenHint"]);if(!e&&!t.hasSeenHint){const e=document.getElementById("first-time-hint");e&&(e.style.display="flex",e.addEventListener("click",async t=>{t.target.closest("a")||(e.style.display="none",await chrome.storage.local.set({hasSeenHint:!0}))}))}}(e.analysesCount),n.log("popup","Stats loaded")}catch(e){n.error("popup","Failed to load stats:",e)}}async function i(){try{const e=await chrome.tabs.query({active:!0,currentWindow:!0});e[0]&&(await chrome.tabs.sendMessage(e[0].id,{type:"TRIGGER_ANALYSIS"}),n.log("popup","Quick analyze triggered"))}catch(e){n.error("popup","Quick analyze failed:",e)}}document.addEventListener("DOMContentLoaded",()=>{!async function(){try{const e=await chrome.runtime.sendMessage({type:"GET_SESSION"}),t=document.getElementById("session-id");t&&(t.textContent=`Session: ${e.sessionId.substring(0,16)}...`),n.log("popup","Session info loaded")}catch(e){n.error("popup","Failed to load session:",e)}}(),s();const e=document.getElementById("quick-analyze-btn");e&&e.addEventListener("click",i);const t=document.getElementById("dashboard-link");t&&(t.href="https://lenquant.com");const o=document.getElementById("settings-link");o&&o.addEventListener("click",()=>{chrome.tabs.create({url:"options.html"})}),n.info("popup","Popup initialized")})}();
